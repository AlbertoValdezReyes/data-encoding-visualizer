<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.uaemex.td.dataencodingvisualizer.controller.MainController"
      styleClass="main-container"
      spacing="18">

    <padding>
        <Insets top="25" right="25" bottom="25" left="25"/>
    </padding>

    <!-- Titulo -->
    <Label text="Visualizacion de Tecnicas de Codificacion de Datos"
           styleClass="title-label"/>

    <Separator/>

    <!-- Panel de Control -->
    <HBox spacing="25" alignment="CENTER_LEFT">
        <!-- Categoria -->
        <VBox spacing="8">
            <Label text="Categoria:" styleClass="section-label"/>
            <ComboBox fx:id="categoryComboBox" prefWidth="300" promptText="Seleccione categoria"/>
        </VBox>

        <!-- Tecnica -->
        <VBox spacing="8">
            <Label text="Tecnica de Codificacion:" styleClass="section-label"/>
            <ComboBox fx:id="techniqueComboBox" prefWidth="340" promptText="Seleccione tecnica"/>
        </VBox>
    </HBox>

    <!-- Input y Boton -->
    <HBox spacing="20" alignment="CENTER_LEFT">
        <VBox spacing="8" HBox.hgrow="ALWAYS">
            <Label text="Datos de Entrada:" styleClass="section-label"/>
            <TextField fx:id="inputTextField"
                       promptText="Ej: 10110010"
                       prefWidth="450"/>
        </VBox>

        <VBox spacing="8" alignment="BOTTOM_LEFT">
            <Label text=" " style="-fx-font-size: 1px;"/>
            <Button fx:id="generateButton"
                    text="Generar Senal"
                    styleClass="generate-button"
                    minWidth="200"
                    prefWidth="200"
                    prefHeight="42"/>
        </VBox>
    </HBox>

    <!-- Panel de Armonicos -->
    <VBox fx:id="harmonicsPanel" spacing="0" visible="false" managed="false"
          styleClass="panel-card, harmonics-panel">

        <!-- Header -->
        <HBox spacing="12" alignment="CENTER_LEFT" onMouseClicked="#toggleHarmonicsContent"
              styleClass="harmonics-header">
            <Label fx:id="harmonicsToggleIcon" text="▼" styleClass="harmonics-icon"/>
            <Label text="Constructor de Armonicos" styleClass="harmonics-title"/>
        </HBox>

        <!-- Contenido -->
        <VBox fx:id="harmonicsContent" spacing="12" style="-fx-padding: 0 18 18 18;">
            <!-- Botones de armonicos -->
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="Armonicos:" styleClass="section-label"/>
                <Button text="sin(t)" onAction="#addSin" styleClass="harmonic-button"/>
                <Button text="cos(t)" onAction="#addCos" styleClass="harmonic-button"/>
                <Button text="sin(2t)" onAction="#addSin2" styleClass="harmonic-button"/>
                <Button text="cos(2t)" onAction="#addCos2" styleClass="harmonic-button"/>
                <Button text="sin(3t)" onAction="#addSin3" styleClass="harmonic-button"/>
                <Button text="cos(3t)" onAction="#addCos3" styleClass="harmonic-button"/>
            </HBox>

            <!-- Operadores -->
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="Operadores:" styleClass="section-label"/>
                <Button text="+" onAction="#addPlus" styleClass="operator-button"/>
                <Button text="-" onAction="#addMinus" styleClass="operator-button"/>
                <Button text="*" onAction="#addMultiply" styleClass="operator-button"/>
                <Button text="/" onAction="#addDivide" styleClass="operator-button"/>
                <Button text="(" onAction="#addOpenParen" styleClass="symbol-button"/>
                <Button text=")" onAction="#addCloseParen" styleClass="symbol-button"/>
                <Button text="pi" onAction="#addPi" styleClass="symbol-button"/>
                <Button text="Limpiar" onAction="#clearFunction" styleClass="clear-button"/>
            </HBox>
        </VBox>
    </VBox>

    <!-- Panel de Parametros Tecnicos -->
    <VBox fx:id="parametersPanel" spacing="0" visible="false" managed="false"
          styleClass="panel-card, parameters-panel">

        <!-- Header -->
        <HBox spacing="12" alignment="CENTER_LEFT" onMouseClicked="#toggleParametersContent"
              styleClass="parameters-header">
            <Label fx:id="parametersToggleIcon" text="▼" styleClass="parameters-icon"/>
            <Label text="Parametros Tecnicos" styleClass="parameters-title"/>
        </HBox>

        <!-- Contenido -->
        <VBox fx:id="parametersContent" spacing="18" style="-fx-padding: 0 18 18 18;">
            <!-- Fila 1: Frecuencia Portadora y Amplitud -->
            <HBox spacing="40">
                <VBox spacing="6" fx:id="carrierFrequencyBox" HBox.hgrow="ALWAYS">
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Frecuencia Portadora:" styleClass="section-label"/>
                        <Label fx:id="carrierFrequencyLabel" text="5.0 Hz" styleClass="parameter-value"/>
                    </HBox>
                    <Slider fx:id="carrierFrequencySlider" min="1" max="50" value="5"
                            showTickLabels="true" showTickMarks="true" majorTickUnit="10" minorTickCount="4"/>
                </VBox>

                <VBox spacing="6" fx:id="amplitudeBox" HBox.hgrow="ALWAYS">
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Amplitud:" styleClass="section-label"/>
                        <Label fx:id="amplitudeLabel" text="1.0 V" styleClass="parameter-value"/>
                    </HBox>
                    <Slider fx:id="amplitudeSlider" min="0.1" max="5" value="1"
                            showTickLabels="true" showTickMarks="true" majorTickUnit="1" minorTickCount="4"/>
                </VBox>
            </HBox>

            <!-- Fila 2: Bit Rate y Sampling Rate -->
            <HBox spacing="40">
                <VBox spacing="6" fx:id="bitRateBox" HBox.hgrow="ALWAYS">
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Tasa de Bits:" styleClass="section-label"/>
                        <Label fx:id="bitRateLabel" text="1.0 bps" styleClass="parameter-value"/>
                    </HBox>
                    <Slider fx:id="bitRateSlider" min="0.5" max="10" value="1"
                            showTickLabels="true" showTickMarks="true" majorTickUnit="2" minorTickCount="3"/>
                </VBox>

                <VBox spacing="6" fx:id="samplingRateBox" HBox.hgrow="ALWAYS">
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Frecuencia Muestreo:" styleClass="section-label"/>
                        <Label fx:id="samplingRateLabel" text="16 muestras" styleClass="parameter-value"/>
                    </HBox>
                    <Slider fx:id="samplingRateSlider" min="4" max="64" value="16"
                            showTickLabels="true" showTickMarks="true" majorTickUnit="16" minorTickCount="3"/>
                </VBox>
            </HBox>

            <!-- Fila 3: Bits por Muestra -->
            <HBox spacing="40">
                <VBox spacing="6" fx:id="bitsPerSampleBox" HBox.hgrow="ALWAYS">
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Bits por Muestra:" styleClass="section-label"/>
                        <Label fx:id="bitsPerSampleLabel" text="3 bits (8 niveles)" styleClass="parameter-value"/>
                    </HBox>
                    <Slider fx:id="bitsPerSampleSlider" min="2" max="8" value="3"
                            showTickLabels="true" showTickMarks="true" majorTickUnit="1" minorTickCount="0"
                            snapToTicks="true" blockIncrement="1"/>
                </VBox>
            </HBox>
        </VBox>
    </VBox>

    <!-- Grafico -->
    <VBox VBox.vgrow="ALWAYS" spacing="8" styleClass="chart-container">
        <Label text="Senal Generada:" styleClass="section-label" style="-fx-font-size: 15px;"/>
        <LineChart fx:id="signalChart"
                   prefHeight="350"
                   legendVisible="true"
                   styleClass="chart">
            <xAxis>
                <NumberAxis fx:id="xAxis" label="Tiempo (segundos)" side="BOTTOM" autoRanging="true"/>
            </xAxis>
            <yAxis>
                <NumberAxis fx:id="yAxis" label="Amplitud (V)" side="LEFT" autoRanging="true"/>
            </yAxis>
        </LineChart>
    </VBox>

    <!-- Descripcion -->
    <VBox spacing="8" styleClass="description-container">
        <Label text="Descripcion de la Tecnica:" styleClass="section-label"/>
        <TextArea fx:id="descriptionTextArea"
                  prefHeight="100"
                  wrapText="true"
                  editable="false"/>
    </VBox>

    <!-- Footer -->
    <Separator/>
    <HBox alignment="CENTER" spacing="20">
        <Label text="Universidad Autonoma del Estado de Mexico" styleClass="footer-label"/>
        <Label text="•" styleClass="footer-separator"/>
        <Label text="Transmision de Datos - 2025" styleClass="footer-label"/>
    </HBox>

</VBox>